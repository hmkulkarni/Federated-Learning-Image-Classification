# Phase 1 - Basic Django Website

#### <u>Prerequisites</u>:
1. Install **CUDA** and **CUDNN**
Download Links: [CUDA](https://developer.nvidia.com/cuda-10.0-download-archive), [CUDNN](https://developer.nvidia.com/rdp/cudnn-archive) <p style="color: red">Install the version according to CUDA tooklit installed during installation of PyTorch</p> 
2. Install **Django**: Use command **`pip install Django`**

### Steps to run:
1. Extract the folder **Phase 1** from the zipped folder.
2. Change the directory to the location where **manage.py** file is located.
3. Migrate the models to the database. For this, run the commands in succession
	* **`python manage.py makemigrations`**. This command will prepare your schema.
	* **`python manage.py migrate`**. This command will apply the schema to entire database (**db.sqlite3** file). These two commands must be run whenever we make any changes to **models.py** file.
4. Run the command **`python manage.py runserver`**. The default port for Django is **`8000`**, but if for any reason, it is occupied, we can use the command  **`python manage.py runserver <port>`**. replace **\<port\>** with whatever port number you wish to run it in.
5. After that, in the webpage, navigate to **MNIST**, and choose an image from the MNIST dataset and click **Submit**.
6. Check the webpage for inference, along with the image, and the **media** folder in root directory for the image saved in the local storage.
7. If you want to access the database, run the command **`python manage.py createsuperuser`**, and enter the username and password (Password will not be visible while typing). On completing this, type the url **127.0.0.1:8000/admin**. This will bring up the django admin panel, which will contain the database. This can be accessed by logging in via the username and password just created. <span style="color: red"><b>NOTE:</b> If the port number is different than 8000, then enter that port number instead in the above url</span>.


# Phase 2 - Federated Learning

#### <u>Prerequisites</u>:
1. Install **CUDA** and **CUDNN**
Download Links: [CUDA](https://developer.nvidia.com/cuda-10.0-download-archive), [CUDNN](https://developer.nvidia.com/rdp/cudnn-archive) <p style="color: red">Install the version according to CUDA tooklit installed during installation of PyTorch</p> 
2. Install **gRPC**: Use command **`pip install grpcio`**
3. Install **gRPC-tools**: Use command **`pip install grpcio-tools`**

### Steps to run:
1. Extract the folder **Phase 2** from the zipped folder.
2. Open two terminals (We can also use split terminals if using Visual Studio Code). Change directory of one terminal to **server**, and another one to **client**.
3. Make sure the port number **`8213`** is not assigned to any other process running at that time. This can be verified if while running it for the first time, we come across an error of cannot bind to the port **`8213`**.
4.  If this is the case, change the port number to another port number in files **client/client.py** and **server/server.py**.
5. The **fileTransfer.proto** file contains the skeleton required for the communication between client and server, and also for file transfer between client and server. If the file is changed, it should be recompiled using the command 
**`python -m grpc_tools.protoc -I. --python_out=./ --grpc_python_out=./ fileTransfer.proto`**. <p style="color: red"><b>NOTE:</b> In case the <b>fileTransfer.proto</b> file is recompiled, then the files <b>fileTransfer_pb2.py</b> and <b>fileTransfer_pb2_grpc.py</b> should be copied and pasted from base folder to both client and server folder before proceeding to next step.
6. After navigating to the server and client directory in the terminals, run the **server.py** and **client.py** in respective terminals by using the commands **`python server.py`** and **`python client.py`** respectively (Run the server.py file first, and then run client.py).
7. Wait for client to disconnect (After saving the file named **final_mnist.pt** in the all three clients of **clientDB** folder)

<p style="color: red"><b>NOTE:</b> The files <b>fileTransfer_pb2.py</b> and <b>fileTransfer_pb2_grpc.py</b> in both client and server folder are auto-generated by running the <b>fileTransfer.proto</b> file</p>

# Phase 3 - Final Django Website

#### <u>Prerequisites</u>:
Install **CUDA** and **CUDNN**
Download Links: [CUDA](https://developer.nvidia.com/cuda-10.0-download-archive), [CUDNN](https://developer.nvidia.com/rdp/cudnn-archive)
<p style="color: red">Install the version according to CUDA tooklit installed during installation of PyTorch</p> 

2. Install **Django**: Use command **`pip install Django`**
3. Install **gRPC**: Use command **`pip install grpcio`**
4. Install **gRPC-tools**: Use command **`pip install grpcio-tools`**

### Steps to run:
1. Extract the folder **Phase 3** from the zipped folder.
2. Change the directory to the location where **manage.py** file is located.
3. Migrate the models to the database. For this, run the commands in succession
	* **`python manage.py makemigrations`**. This command will prepare your schema.
	* **`python manage.py migrate`**. This command will apply the schema to entire database (**db.sqlite3** file). These two commands must be run whenever we make any changes to **models.py** file.
4. Run the command **`python manage.py runserver`**. The default port for Django is **`8000`**, but if for any reason, it is occupied, we can use the command  **`python manage.py runserver <port>`**. replace **\<port\>** with whatever port number you wish to run it in.
5. After that, in the webpage, navigate to **MNIST**, and choose an image from the MNIST dataset and click **Submit**.
6. Wait for the federated learning part to be completed. We can see the training going on in the terminal of the text editor being used. During this training, the webpage will be in loading phase.
7. After completing the client training process, check the webpage to find the inference, along with the image, and the **media** folder in root directory for the image saved in the local storage.
8. If you want to access the database, run the command **`python manage.py createsuperuser`**, and enter the username and password (Password will not be visible while typing). On completing this, type the url **127.0.0.1:8000/admin**. This will bring up the django admin panel, which will contain the database. This can be accessed by logging in via the username and password just created. <span style="color: red"><b>NOTE:</b> If the port number is different than 8000, then enter that port number instead in the above url</span>.